<html ng-app="parasiteApp">
	<head>
        <!-- inject:css -->
        <link rel="stylesheet" href="/www/external/bower_components/select2/select2.css">
        <link rel="stylesheet" href="/www/external/bower_components/select2/select2-bootstrap.css">
        <link rel="stylesheet" href="/www/external/bower_components/bootstrap/docs/assets/css/bootstrap.css">
        <link rel="stylesheet" href="/www/external/bower_components/kendo-ui/styles/web/kendo.common.core.min.css">
        <link rel="stylesheet" href="/www/homepage/parasite.css">
        <link rel="stylesheet" href="/www/applications/utils/directives.css">
        <link rel="stylesheet" href="/www/applications/utils/pie/directive_pie.css">
        <link rel="stylesheet" href="/www/applications/general/plugins/circles/circles.css">
        <link rel="stylesheet" href="/www/applications/general/plugins/tree/tree.css">
        <!-- endinject -->

        <!-- inject:js -->
        <script src="/www/external/bower_components/jquery/jquery.min.js"></script>
        <script src="/www/external/bower_components/angular/angular.js"></script>
        <script src="/www/external/bower_components/angular-resource/angular-resource.js"></script>
        <script src="/www/external/bower_components/angular-animate/angular-animate.js"></script>
        <script src="/www/external/bower_components/select2/select2.js"></script>
        <script src="/www/external/bower_components/angular-ui-select2/src/select2.js"></script>
        <script src="/www/external/bower_components/d3/d3.js"></script>
        <script src="/www/external/bower_components/d3-tip/index.js"></script>
        <script src="/www/external/bower_components/kendo-ui/js/kendo.ui.core.min.js"></script>
        <script src="/www/external/bower_components/angular-kendo/angular-kendo.js"></script>
        <script src="/www/external/bower_components/bootstrap/docs/assets/js/bootstrap.min.js"></script>
        <script src="/www/external/bower_components/angular-bootstrap/ui-bootstrap.js"></script>
        <script src="/www/external/class/class.js"></script>
        <script src="/www/applications/devcenter/module.js"></script>
        <script src="/www/applications/parasite/module.js"></script>
        <script src="/www/applications/skeleton/module.js"></script>
        <script src="/www/applications/utils/module.js"></script>
        <script src="/www/core/module.js"></script>
        <script src="/www/homepage/module.js"></script>
        <script src="/www/applications/devcenter/plugins/module.js"></script>
        <script src="/www/applications/general/plugins/module.js"></script>
        <script src="/www/applications/parasite/plugins/module.js"></script>
        <script src="/www/applications/skeleton/plugins/module.js"></script>
        <script src="/www/core/applications_services.js"></script>
        <script src="/www/core/dev_services.js"></script>
        <script src="/www/core/login_services.js"></script>
        <script src="/www/core/navigation_model.js"></script>
        <script src="/www/core/navigation_services.js"></script>
        <script src="/www/core/plugins_services.js"></script>
        <script src="/www/core/search_services.js"></script>
        <script src="/www/core/url_services.js"></script>
        <script src="/www/homepage/controllers.js"></script>
        <script src="/www/homepage/directives.js"></script>
        <script src="/www/homepage/search.js"></script>
        <script src="/www/applications/devcenter/app.js"></script>
        <script src="/www/applications/parasite/app.js"></script>
        <script src="/www/applications/skeleton/app.js"></script>
        <script src="/www/applications/utils/controllers.js"></script>
        <script src="/www/applications/utils/directives.js"></script>
        <script src="/www/applications/utils/filters.js"></script>
        <script src="/www/applications/utils/plugins.js"></script>
        <script src="/www/applications/utils/pie/directives_pie.js"></script>
        <script src="/www/applications/devcenter/plugins/slide/devcenter_controllers.js"></script>
        <script src="/www/applications/devcenter/plugins/slide/devcenter_directives.js"></script>
        <script src="/www/applications/devcenter/plugins/slide/plugin.js"></script>
        <script src="/www/applications/general/plugins/circles/circles_controllers.js"></script>
        <script src="/www/applications/general/plugins/circles/plugin.js"></script>
        <script src="/www/applications/general/plugins/table/pagination_controllers.js"></script>
        <script src="/www/applications/general/plugins/table/plugin.js"></script>
        <script src="/www/applications/general/plugins/tree/plugin.js"></script>
        <script src="/www/applications/general/plugins/tree/tree_controllers.js"></script>
        <script src="/www/applications/parasite/plugins/thumbnails/plugin.js"></script>
        <script src="/www/applications/parasite/plugins/thumbnails/thumbnails_controllers.js"></script>
        <script src="/www/applications/parasite/plugins/welcome/plugin.js"></script>
        <script src="/www/applications/parasite/plugins/showcase/plugin.js"></script>
        <script src="/www/applications/parasite/plugins/showcase/showcase_controllers.js"></script>
        <script src="/www/applications/skeleton/plugins/content/content_controllers.js"></script>
        <script src="/www/applications/skeleton/plugins/content/plugin.js"></script>
        <script src="/www/applications/skeleton/plugins/navigation/navigation_controllers.js"></script>
        <script src="/www/applications/skeleton/plugins/navigation/plugin.js"></script>
        <!-- endinject -->

        <!-- inject:dev:js -->
        <script src="/www/build/dev_mode.js"></script>
        <!-- endinject -->
	</head>

	<body>
		<div ng-controller="ApplicationsCtrl">
			<div class="navbar">
				<div ng-controller="SearchCtrl"
                     ng-show="searchSupported || login.isLoginSupported()"
                     class="navbar-inner">
					<div class="container-fluid">

						<a class="brand" href="#">{{ currentApplication().name }}</a>

						<form ng-show="searchSupported"
							  class="navbar-search form-search"
							  ng-submit="search()">
							<div class="input-append">
								<input type="hidden"
                                       id="select2-search-options"
                                       ui-select2="select2Options"
                                       multiple
                                       ng-model="searchInput"
                                       data-placeholder="Filter...">
                                </input>

                                <button type="submit" class="btn" para-loading-button="searching()" icon="icon-spinner">
                                    <i class="icon-search"></i> Search
                                </button>
							</div>
						</form>


						<div ng-controller="LoginCtrl"
                             ng-if="login.isLoginSupported()"
                             class="navbar-text pull-right">
                            {{ greetingPrefix }}<a href="#" ng-click="login.promptLogin()">{{ login.user() || "you" }}</a>{{ greetingSuffix }}
						</div>
					</div>
				</div>
			</div>

			<div class="container-fluid body">

				<div class="row-fluid" ng-if="currentApplication().isNavigationLinkedToUrl()">
					<ul class="breadcrumb" ng-controller="BreadcrumbCtrl">
						<li ng-repeat="crumb in breadcrumbs"
							ng-class="$last ? 'active' : ''">

							<span class="divider">
								/
							</span>
							<a href="" ng-show="! $last" ng-click="currentNavigationNode(crumb)">
								{{ crumb.name }}
							</a>
							<span ng-show="$last">
								{{ crumb.name }}
							</span>

						</li>
					</ul>
				</div>


			    <div class="row-fluid">
		    		<p class="navbar-text" style="text-align: center;">
                        <ul class="nav nav-pills pull-left"
                            ng-style="navigationPluginConfs().length <= 1 ? {visibility : 'hidden'} : {}">
                            <li ng-class="{'active' : p == currentNavigationPluginConf()}"
                                ng-repeat="p in navigationPluginConfs()"
                                ng-controller="PluginLinkCtrl">

                                <a href="#"
                                   ng-click="currentNavigationPluginConf(p)">
                                    <span ng-bind-html="repr" />
                                </a>

                            </li>
                        </ul>

                        <ul class="span6 nav nav-pills pull-right">
                            <li class="pull-right">
                                <button type="button"
                                        para-tooltip="hide content"
                                        class="close"
                                        style="padding-top: 5px"
                                        ng-style="currentContentPluginConf() == null ? {visibility : 'hidden'} : {}"
                                        ng-click="currentContentPluginConf(null)">
                                    <span class="icon-remove"></span>
                                </button>
                            </li>

                            <li ng-class="{'active' : p == currentContentPluginConf()}"
                                ng-style="contentPluginConfs().length <= 1 ? {visibility : 'hidden'} : {}"
                                class="pull-right"
                                ng-repeat="p in contentPluginConfs()"
                                ng-controller="PluginLinkCtrl">

                                <a href="#"
                                   ng-click="currentContentPluginConf(p)">
                                    <span ng-bind-html="repr" />
                                </a>

                            </li>
                        </ul>
		    		</p>
			    </div>

                <div kendo-splitter
                     k-panes="[{collapsible: false, scrollable: false}, {collapsible: true, scrollable: false}]"
                     para-plugin-canvas-container
                     show-content="currentContentPluginConf() != null">
                    <para-plugin-canvas class="navigation-plugin">
                        <div class="plugin-loading-spinner"
                             ng-class="{'plugin-loading' : navigationPluginLoading(), 'plugin-loading-failed' : navigationPluginLoadingFailed()}">
                            <span></span>
                            <span></span>
                            <span></span>
                            <br />
                            <div ng-if="navigationPluginLoadingFailed()" class="label label-inverse">
                                The dwarf in charge for fetching your data is on break.
                                <br />
                                Try again later.
                            </div>
                        </div>
                        <div class="plugin"
                             ng-class="{'plugin-loading' : navigationPluginLoading() || navigationPluginLoadingFailed()}"
                             ng-include="navigationPluginTemplate"
                             onload="currentNavigationPluginConf().onload()"></div>
                    </para-plugin-canvas>
                    <para-plugin-canvas class="content-plugin">
                        <div class="plugin-loading-spinner"
                             ng-class="{'plugin-loading' : contentPluginLoading(), 'plugin-loading-failed' : contentPluginLoadingFailed()}">
                            <span></span>
                            <span></span>
                            <span></span>
                            <br />
                            <div ng-if="contentPluginLoadingFailed()" class="label label-inverse">
                                The dwarf in charge for fetching your data is on break.
                                <br />
                                Try again later.
                            </div>
                        </div>
                        <div class="plugin"
                             ng-class="{'plugin-loading' : contentPluginLoading() || contentPluginLoadingFailed()}"
                             ng-include="contentPluginTemplate"
                             onload="currentContentPluginConf().onload()"></div>
                    </para-plugin-canvas>
                </div>
            </div>

		</div>
	</body>
</html>
